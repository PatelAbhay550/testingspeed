async function loadLocation(){const e=document.getElementById("locationInfo");try{const t=await fetch("/api/location"),n=await t.json();if(n.success&&n.location){const t=n.location;e.innerHTML=`<div style="display: grid; gap: 12px; text-align: left;"><div style="font-weight: 600; font-size: 15px; text-align: center; padding-bottom: 8px; border-bottom: 1px solid #e5e7eb;">ğŸ“ Your Location</div><div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 18px;">ğŸŒ</span><span><strong>Location:</strong> ${t.city||"Unknown"}, ${t.region||""} ${t.country||""}</span></div><div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 18px;">ğŸ“¶</span><span><strong>ISP:</strong> ${t.isp||"Unknown"}</span></div><div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 18px;">ğŸ•</span><span><strong>Timezone:</strong> ${t.timezone||"Unknown"}</span></div><div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 18px;">ğŸŒ</span><span><strong>IP:</strong> ${t.ip||"Unknown"}</span></div></div>`}else e.innerHTML="<div>ğŸ“ Location unavailable</div>"}catch(t){e.innerHTML="<div>ğŸ“ Could not load location</div>"}}window.addEventListener("DOMContentLoaded",loadLocation);async function runTest(){const e=document.getElementById("testBtn"),t=document.getElementById("speed"),n=document.getElementById("status");e.disabled=!0,t.textContent="0.00",n.textContent="Testing...",n.className="status";try{const a="https://speed.cloudflare.com/__down?bytes=25000000";let s=0;const o=Date.now();let i=o,d=0;for(let e=0;e<3;e++){const e=await fetch(a),l=e.body.getReader();for(;;){const{done:e,value:a}=await l.read();if(e)break;s+=a.length;const c=Date.now();if(c-i>200){const e=(c-i)/1e3,a=s-d,l=8*a/(1e6*e);t.textContent=l.toFixed(2),i=c,d=s}}}const l=(Date.now()-o)/1e3,c=8*s/(1e6*l);t.textContent=c.toFixed(2),n.textContent="Test complete"}catch(e){t.textContent="0.00",n.textContent="Error: "+e.message,n.className="status error"}finally{e.disabled=!1}}"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/public/sw.js").then((e=>console.log("SW registered"))).catch((e=>console.log("SW registration failed")))}));